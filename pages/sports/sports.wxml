<view class="container">
  <view class="fixed-bg" style="background-image: url('https://youke.xn--y7xa690gmna.cn/s1/2026/02/09/6989d4aa1ebd2.webp');"></view>

  <view class="custom-nav" style="height: {{navHeight}}px; padding-top: {{navTop}}px;">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">ã€ˆ</text>
    </view>
  </view>

  <scroll-view scroll-y="true" class="scroll-area">
    <view class="nav-spacer" style="height: {{navHeight}}px;"></view>
    
    <view class="header">ğŸƒâ€â™‚ï¸ è¿åŠ¨æ‰“å¡</view>

    <view class="section-title">å¿«é€Ÿè®°å½• (å·¦å³æ»‘åŠ¨)</view>

    <scroll-view class="sports-scroll-view" scroll-x="true" enable-flex="true">
      <view class="sport-item" wx:for="{{sportTypes}}" wx:key="name" bindtap="onAddSport" data-type="{{item.name}}">
        <text class="sport-icon">{{item.icon}}</text>
        <text>{{item.name}}</text>
      </view>
    </scroll-view>

    <view class="section-title">å†å²è®°å½•</view>
    <view class="history-list">
      <view class="history-item" 
            wx:for="{{history}}" 
            wx:key="index" 
            bindlongpress="onDeleteRecord" 
            data-index="{{index}}">
        <view class="item-left">
          <text class="item-type">{{item.type}}</text>
          <text class="item-date">{{item.timeRange}} ({{item.date}})</text>
        </view>
        <view class="item-right">
          <text class="item-duration">+ {{item.durationText}}</text>
        </view>
      </view>
    </view>

    <view class="bottom-spacer"></view>
  </scroll-view>

  <view class="modal-mask" wx:if="{{showModal}}" bindtap="hideModal">
    <view class="modal-content" catchtap="doNothing">
    <view class="modal-title">è®°å½• {{currentType === 'å…¶ä»–' ? 'è¿åŠ¨' : currentType}}</view>
    
    <view class="input-section" wx:if="{{currentType === 'å…¶ä»–'}}">
      <input class="type-input" placeholder="è¯·è¾“å…¥è¿åŠ¨åç§°" bindinput="onTypeNameInput" value="{{customTypeName}}" focus="{{currentType === 'å…¶ä»–'}}"/>
    </view>

    <view class="picker-row">
      <picker mode="time" value="{{startTime}}" bindchange="bindStartTimeChange">
        <view class="time-box">å¼€å§‹: {{startTime}}</view>
      </picker>
      <text class="to-text">è‡³</text>
      <picker mode="time" value="{{endTime}}" bindchange="bindEndTimeChange">
        <view class="time-box">ç»“æŸ: {{endTime}}</view>
      </picker>
    </view>
    <view class="modal-btns">
      <button class="btn-cancel" bindtap="hideModal">å–æ¶ˆ</button>
      <button class="btn-confirm" bindtap="submitRecord">ç¡®å®š</button>
    </view>
  </view>
  </view>
</view>